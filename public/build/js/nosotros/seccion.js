import{obtenerId}from"../layout/utilidades.js";!function(){!async function(){const e="/api/seccion?id="+obtenerId();try{const i=await fetch(e),n=await i.json();"exito"===n.tipo&&(o=n.seccion,t={...o},document.querySelector("#publico-btn").addEventListener("click",()=>{t.publico="1"===t.publico?"0":"1",async function(e,t){const{id:i,nombre:n,contenido:c,imagen:a,publico:s,usuarioId:r}=e,p=new FormData;p.append("id",i),p.append("nombre",n),p.append("contenido",c),p.append("imagen",a),p.append("publico",s),p.append("usuarioId",r);try{const e=await fetch("/api/seccion/actualizar",{method:"POST",body:p}),i=await e.json();if("exito"===i.tipo&&(o=i.seccion),Swal.fire(i.tipo.toUpperCase(),i.mensaje.toUpperCase(),"exito"===i.tipo?"success":"error"),"estatus"===t&&"exito"===i.tipo){const e=document.querySelector("#publico-btn");e.classList.toggle("publico"),e.classList.toggle("privado"),e.textContent="0"===o.publico?"No Publicado":"Publicado"}}catch(o){console.error(o)}}(t,"estatus")}),document.querySelector("#eliminar-btn").addEventListener("click",()=>{Swal.fire({title:"Atencion".toUpperCase(),text:"Deseas Eliminar la Seccion".toUpperCase(),icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&async function(){const{id:e}=o,t=new FormData;t.append("id",e);try{const o=await fetch("/api/seccion/eliminar",{method:"POST",body:t}),e=await o.json();Swal.fire(e.tipo.toUpperCase(),e.mensaje.toUpperCase(),"exito"===e.tipo?"success":"error"),"exito"===e.tipo&&setTimeout(()=>{window.location="/nosotros"},2e3)}catch(o){console.error(o)}}()})}))}catch(o){console.error(o)}var t}();let o={}}();