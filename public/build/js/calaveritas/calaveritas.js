!function(){let e=[];function t(){const a=document.querySelector(".modal");a&&(document.body.classList.remove("no-scroll"),a.remove()),document.body.classList.add("no-scroll");const o=document.createElement("DIV");o.classList.add("modal");const c=document.createElement("DIV");c.textContent="Ã—",c.classList.add("cerrar-modal"),c.onclick=()=>{document.body.classList.remove("no-scroll"),o.remove()};const n=document.createElement("DIV");n.classList.add("contenido-modal","contenedor-sm"),e.forEach(a=>{const o=document.createElement("DIV");o.classList.add("calaverita");const c=document.createElement("P");c.textContent=a.nombre;const d=document.createElement("BUTTON");d.textContent="1"===a.publico?"Publico":"Privado",d.classList.add("1"===a.publico?"publico":"privado"),d.onclick=()=>{"0"===a.publico&&function(a){let o=[];for(let t of e)o=[...o,{...t}];o=o.map(e=>e.id===a.id?(e.publico="1",e):(e.publico="0",e)),async function(a){const o=a.map(e=>{const{id:t,nombre:a,calaverita:o,autor:c,creado:n,publico:d,usuarioId:i}=e,l=new FormData;return l.append("id",t),l.append("nombre",a),l.append("calaverita",o),l.append("autor",c),l.append("creado",n),l.append("publico",d),l.append("usuarioId",i),l});try{const a=o.map(e=>fetch("/api/calaverita/actualizar",{method:"POST",body:e})),c=await Promise.all(a);for(let t of c){const a=await t.json();"exito"===a.tipo&&(e=e.map(e=>a.calaverita.id===e.id?a.calaverita:e))}t()}catch(e){console.error(e)}}(o)}({...a})},o.appendChild(c),o.appendChild(d),n.appendChild(o)}),o.appendChild(c),o.appendChild(n),document.querySelector(".dashboard").appendChild(o)}!async function(){try{const a=await fetch("/api/calaveritas"),o=await a.json();"exito"===o.tipo&&(e=o.calaveritas,document.querySelector("#predeterminada-btn").addEventListener("click",()=>{t()}))}catch(e){console.error(e)}}()}();