import{obtenerId}from"../layout/utilidades.js";!function(){!async function(){const e="/api/producto?id="+obtenerId();try{const i=await fetch(e),n=await i.json();"exito"===n.tipo&&(o=n.producto,t={...o},document.querySelector("#diponible-btn").addEventListener("click",()=>{t.disponible="1"===t.disponible?"0":"1",async function(e,t){const{id:i,nombre:n,precio:a,disponible:r,imagen:c,usuarioId:s}=e,p=new FormData;p.append("id",i),p.append("nombre",n),p.append("precio",a),p.append("disponible",r),p.append("imagen",c),p.append("usuarioId",s);try{const e=await fetch("/api/producto/actualizar",{method:"POST",body:p}),i=await e.json();if("exito"===i.tipo&&(o=i.producto),Swal.fire(i.tipo.toUpperCase(),i.mensaje.toUpperCase(),"exito"===i.tipo?"success":"error"),"disponible"===t&&"exito"===i.tipo){const e=document.querySelector("#diponible-btn");e.classList.toggle("disponible"),e.classList.toggle("no-disponible"),e.textContent="1"===o.disponible?"Disponible":"No Disponible"}}catch(o){console.error(o)}}(t,"disponible")}),document.querySelector("#eliminar-btn").addEventListener("click",()=>{Swal.fire({title:"Atencion".toUpperCase(),text:"Deseas Eliminar el Producto".toUpperCase(),icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&async function(){const{id:e}=o,t=new FormData;t.append("id",e);try{const o=await fetch("/api/producto/eliminar",{method:"POST",body:t}),e=await o.json();Swal.fire(e.tipo.toUpperCase(),e.mensaje.toUpperCase(),"exito"===e.tipo?"success":"error"),"exito"===e.tipo&&setTimeout(()=>{window.location="/productos"},2e3)}catch(o){console.error(o)}}()})}))}catch(o){console.error(o)}var t}();let o={}}();